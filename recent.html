<!DOCTYPE html>
<html>
  <head>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5598129470490010"
      crossorigin="anonymous"
    ></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y71QM9DR66"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-Y71QM9DR66");
    </script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title class="cloak">Recent | MacVG</title>
    <link class="favicon" rel="icon" type="image/x-icon" href="/logo.png" />
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="games.css" />
  </head>
  <body>
    <nav class="nav" id="nav">
      <div class="overflowm shoot" id="overflowm">
        <img src="media/bars-solid.svg" alt="Menu" class="shoot" />
      </div>
      <a href="/macvg/" class="logo2" style="background-color: transparent">
        <img src="/macvg/media/macvg-logo.png" alt="MacVG Logo" />
      </a>
      <a href="new.html" class="nav-link">New</a>
      <a href="trending.html" class="nav-link">Trending</a>
      <a href="recent.html" class="nav-link">Recent</a>
      <a href="/macvg/settings.html" class="nav-link">Settings</a>
      <div class="right">
        <div class="select help-menu">
          <span class="help-label help-menu">Originals</span>
          <img src="media/caret.svg" class="caret help-menu" id="caret" />
          <ul id="cats" class="cats help-menu">
            <a href="/macvg/originals/atomic/" target="_blank">Atomic Clicker</a>
            <a href="/macvg/originals/macboard/" target="_blank">MacBoard</a>
          </ul>
        </div>
        <div class="select help-menu">
          <span class="help-label help-menu">Help</span>
          <img src="media/caret.svg" class="caret help-menu" id="caret" />
          <ul id="cats" class="cats help-menu">
            <a href="/macblog/apps/macvg/" target="_blank">About</a>
            <a href="/macblog/updates/macvg/" target="_blank">Updates</a>
            <a href="/macblog/apps/macvg/" target="_blank">Docs</a>
            <a href="https://forms.gle/UpHgbAmLtUPCD5bs8" target="_blank">Feedback</a>
          </ul>
        </div>
        <img src="media/profile.svg" class="profile" id="profile" />
      </div>
    </nav>
    <div class="macsidebar" id="sidebar">
      <a href="/"><img src="/logo.png" alt="" /></a>
      <a href="/macideas/"><img src="/MacIdeas Logo.png" alt="" /></a>
      <a href="/maclearn/"><img src="/MacLearn Logo.png" alt="" /></a>
      <a href="/mactools/"><img src="/MacTools Logo.png" alt="" /></a>
      <a href="/macvg/"><img src="/MacVG Logo.png" alt="" /></a>
      <a href="/macblog/"><img src="/MacBlog Logo.png" alt="" /></a>
    </div>
    <div class="wrap" id="wrap">
      <header class="homeheader">
        <div class="title" name="Recent Games">Recent Games</div>
        <div class="sub" style="text-align: left">
          With the Recent tab, you can quickly access the games you've recently played, making it easy to jump right back and
          continue playing them without browsing through every game to find them!
          <p style="text-decoration: underline; cursor: pointer; display: inline-block" onclick="clearRecents()">Clear Recents</p>
        </div>
      </header>
      <div id="recentList" class="games-container" style="color: white; font-size: 20px; margin-block: 30px">
        You haven't played any games yet! Browse our games on the homepage or from the tabs above.
      </div>

      <div class="ad-container">
        <!-- MacVG homepage ads -->
        <ins
          class="adsbygoogle"
          data-ad-client="ca-pub-5598129470490010"
          data-ad-slot="3087664545"
          data-ad-format="auto"
          data-full-width-responsive="true"
        ></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>
    </div>
    <footer class="footer">
      <div class="copyright">
        <span>¬© <span id="year"></span> <a href="/">MacWeb</a></span>
        <span> All rights reserved</span>
      </div>
      <div>
        Made with ‚ù§Ô∏è and üïí by <a href="https://github.com/tonymac129" target="_blank">Tony Macaroni</a> (totally not for profit
        and definitely not earning hundreds from this btw)
      </div>
      <div class="footer-icons">
        <a href="mailto:mac.web.company@gmail.com" class="footer-icon">
          <img src="media/email.svg" />
        </a>
        <a href="https://www.youtube.com/@Mac-Web" target="_blank" class="footer-icon yt">
          <img src="media/youtube.svg" />
        </a>
        <a href="https://github.com/Mac-Web/macvg" target="_blank" class="footer-icon gh">
          <img src="media/github.svg" />
        </a>
        <a href="https://discord.gg/UT7g2S2cBP" target="_blank" class="footer-icon dc">
          <img src="media/discord.svg" />
        </a>
      </div>
    </footer>
    <script src="app.js"></script>
    <script>
      const recentList = document.getElementById("recentList");
      const gamess = document.getElementById("list");

      function clearRecents() {
        if (confirm("Are you sure you want to clear your recent play history?")) {
          localStorage.removeItem("macvgRecents");
          recentList.innerHTML = "You haven't played any games yet! Browse our games on the homepage or from the tabs above.";
        }
      }

      let newArray = [];
      let everythingArray = [];
      let data;
      fetch("games.json")
        .then((response) => response.json())
        .then((dataa) => {
          data = dataa.games;
          for (var i = 0; i < data.length; i++) {
            newArray.push(data[i]);
          }
          everythingArray = newArray;

          let recents = localStorage.macvgRecents;
          let list = recents.split(",");
          let selectedGames = [];
          console.log(list);
          if (list) {
            recentList.innerHTML = "";
          }

          list.forEach((one) => {
            everythingArray.forEach((game) => {
              let item = game.id;
              if (item == one) {
                console.log(game.name);
                const newGame = document.createElement("a");
                newGame.classList.add("game");
                newGame.setAttribute("id", `game${game.id}`);
                newGame.setAttribute("name", game.name);
                newGame.innerHTML = game.name;
                newGame.style.backgroundImage = `linear-gradient(
        rgba(40, 40, 40, 0.2),
        rgba(20, 20, 20, 0.9)
      ),
      url("${game.link + game.thumb}")`;
                newGame.addEventListener("click", () => {
                  const params = new URLSearchParams({ target: game.id });
                  window.location.href = `game.html?${params.toString()}`;
                });

                recentList.appendChild(newGame);
              }
            });
          });
        })
        .catch((error) => console.error("Error fetching data:", error));
    </script>
  </body>
</html>
